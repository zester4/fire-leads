IiJNYWluIENMSSBlbnRyeSBwb2ludC4iIiIKaW1wb3J0IGFyZ3BwYXJzZQpmcm9tIGNvbmZpZyBpbXBvcnQgQ29uZmlnCmZyb20gbGVhZF9leHRyYWN0b3IgaW1wb3J0IExlYWRFeHRyYWN0b3IKZnJvbSBjcm1faW50ZWdyYXRpb25zIGltcG9ydCBwdXNoX3RvX2h1YnNwb3QsIHB1c2hfdG9faW5zdGFudGx5CgpkZWYgbWFpbigpOgogICAgcGFyc2VyID0gYXJncGFyc2UuQXJndW1lbnRQYXJzZXIoCiAgICAgICAgZGVzY3JpcHRpb249IkV4dHJhY3QgbGVhZHMgZnJvbSB3ZWJzaXRlcyB1c2luZyBGaXJlY3Jhd2wiLAogICAgICAgIGZvcm1hdHRlcl9jbGFzcz1hcmdwYXJzZS5SYXdEZXNjcmlwdGlvbkhlbHBGb3JtYXR0ZXIsCiAgICAgICAgZXBpbG9nPSIiIgpleGFtcGxlczoKICBweXRob24gbWFpbi5weSAtLWRvbWFpbiBodHRwczovL2V4YW1wbGUuY29tCiAgcHl0aG9uIG1haW4ucHkgLS1kb21haW4gaHR0cHM6Ly9leGFtcGxlLmNvbSAtLW1heC1wYWdlcyAyMDAgLS1vdXRwdXQgbXlfbGVhZHMKICBweXRob24gbWFpbiBtYWluLnB5IC0tZG9tYWluIGh0dHBzOi8vZXhhbXBsZS5jb20gLS1wdXNoLWh1YnNwb3QKICAgICAgICAiIiIKICAgICkKICAgIAogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgKICAgICAgICAnLS1kb21haW4nLAogICAgICAgIHJlcXVpcmVkPVRydWUsCiAgICAgICAgaGVscD0nVGFyZ2V0IGRvbWFpbiB0byBleHRyYWN0IGxlYWRzIGZyb20gKGUuZy4sIGh0dHBzOi8vZXhhbXBsZS5jb20pJwogICAgKQogICAgCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KAogICAgICAgICctLW1heC1wYWdlcycsCiAgICAgICAgdHlwZT1pbnQsCiAgICAgICAgZGVmYXVsdD1Db25maWcuTUFYX1BBR0VTLCAgICAgICAgCiAgICAgICAgaGVscD1mJ01heGltdW0gbnVtYmVyIG9mIHBhZ2VzIHRvIHByb2Nlc3MgKGRlZmF1bHQ6IHtDb25maWcuTUFYX1BBR0VTfSknCiAgICApCiAgICAKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoCiAgICAgICAgJy0tb3V0cHV0JywKICAgICAgICBkZWZhdWx0PSdsZWFkcycsCiAgICAgICAgaGVscD0nQmFzZSBmaWxlbmFtZSBmb3Igb3V0cHV0IGZpbGVzIChklZmF1bHQ6IGxlYWRzKScKICAgICkKICAgIAogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgKICAgICAgICAnLS1wdXNoLWh1YnNwb3QnLAogICAgICAgIGFjdGlvbj0nc3RvcmVfdHJ1ZScsCiAgICAgICAgaGVscD0nUHVzaCByZXN1bHRzIHRvIEh1YlNwb3QgQ1JNJwogICAgKQogICAgCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KAogICAgICAgICctLXB1c2gtaW5zdGFudGx5JywKICAgICAgICBhY3Rpb249J3N0b3JlX3RydWUnLAogICAgICAgIGhlbHA9J1B1c2ggcmVzdWx0cyB0byBJbnN0YW50bHknCiAgICApCiAgICAKICAgIGFyZ3MgPSBwYXJzZXIucGFyc2VfYXJncygpCiAgICAKICAgICMgSW5pdGlhbGl6ZSBleHRyYWN0b3IKICAgIGV4dHJhY3RvciA9IExlYWRFeHRyYWN0b3IoYXBpX2tleT1Db25maWcuRklSRUNSQVdMX0FQSV9LRVkpCiAgICAKICAgICMgUnVuIGV4dHJhY3Rpb24KICAgIGZpbGVzID0gZXh0cmFjdG9yLnJ1bihhcmdzLmRvbWFpbiwgYXJncy5tYXhfcGFnZXMpCiAgICAKICAgICMgUHVzaCB0byBDUk1zIGlmIHJlcXVlc3RlZAogICAgaWYgZmlsZXMgYW5kIGV4dHJhY3Rvci5sZWFkczoKICAgICAgICBpZiBhcmdzLnB1c2hfaHVic3BvdCBvciBDb25maWcuUFVTSF9UT19IVUJTE9PVAogICAgICAgICAgICBwdXNoX3RvX2h1YnNwb3QoZXh0cmFjdG9yLmxlYWRzKQogICAgICAgIAogICAgICAgIGlmIGFyZ3MucHVzaF9pbnN0YW50bHkgb3IgQ29uZmlnLlBVU0hfVE9fSU5TVEFOVExZCiAgICAgICAgICAgIHB1c2hfdG9faW5zdGFudGx5KGV4dHJhY3Rvci5sZWFkcykKICAgIAogICAgcHJpbnQoIiIiCiIgRG9uZSEiIiIpCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgbWFpbigp